@model WebApplication1.Models.Computer
@{
    ViewData["Title"] = "Bilgisayar Sil";
}

<link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.7.3/sweetalert2.min.css" rel="stylesheet">

<style>
    body {
        background-color: #ffffff;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        color: #2c3e50;
    }

    .page-header {
        padding: 2rem 0 1rem 0;
        border-bottom: none;
        background: transparent;
    }

    .page-title {
        font-size: 2rem;
        font-weight: 600;
        color: #e74c3c;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .page-title i {
        color: #e74c3c;
        font-size: 1.8rem;
    }

    .page-subtitle {
        color: #7f8c8d;
        font-size: 1rem;
        margin-top: 0.5rem;
    }

    .danger-alert {
        background: linear-gradient(135deg, #fee 0%, #fdd 100%);
        border: 2px solid #e74c3c;
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        text-align: center;
    }

    .danger-icon {
        width: 80px;
        height: 80px;
        background: #e74c3c;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem auto;
        color: white;
        font-size: 2rem;
        animation: pulse 2s infinite;
    }

    @@keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    .danger-title {
        color: #c0392b;
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .danger-message {
        color: #e74c3c;
        font-size: 1.1rem;
        line-height: 1.6;
    }

    .computer-info-card {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        border: 1px solid #ecf0f1;
    }

    .computer-header {
        display: flex;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #ecf0f1;
    }

    .computer-icon {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        margin-right: 1.5rem;
        font-size: 1.5rem;
    }

    .computer-details h3 {
        margin: 0 0 0.5rem 0;
        color: #2c3e50;
        font-size: 1.5rem;
        font-weight: 600;
    }

    .computer-details .meta {
        color: #7f8c8d;
        font-size: 0.95rem;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
    }

    .info-section {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 1.5rem;
        border-left: 4px solid #3498db;
    }

    .info-section h4 {
        color: #2c3e50;
        font-size: 1.1rem;
        font-weight: 600;
        margin: 0 0 1rem 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .info-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        border-bottom: 1px solid #ecf0f1;
    }

    .info-item:last-child {
        border-bottom: none;
    }

    .info-label {
        font-weight: 500;
        color: #7f8c8d;
        font-size: 0.9rem;
    }

    .info-value {
        color: #2c3e50;
        font-size: 0.9rem;
        text-align: right;
    }

    .status-badge {
        padding: 0.375rem 0.75rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
    }

    .status-badge.active {
        background-color: #dcfce7;
        color: #166534;
    }

    .status-badge.inactive {
        background-color: #f3f4f6;
        color: #374151;
    }

    .employee-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .employee-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #3498db;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.8rem;
    }

    .consequences-card {
        background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
        border: 2px solid #ffa726;
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
    }

    .consequences-title {
        color: #ef6c00;
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .consequences-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .consequences-list li {
        padding: 0.5rem 0;
        color: #e65100;
        display: flex;
        align-items: flex-start;
        gap: 0.5rem;
    }

    .consequences-list li i {
        margin-top: 0.2rem;
        color: #ff9800;
    }

    .action-buttons {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        border: 1px solid #ecf0f1;
        display: flex;
        gap: 1rem;
        justify-content: space-between;
        align-items: center;
    }

    .btn {
        border-radius: 8px;
        padding: 0.75rem 2rem;
        font-weight: 500;
        font-size: 0.95rem;
        border: none;
        cursor: pointer;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.2s ease;
        min-width: 150px;
        justify-content: center;
    }

    .btn-danger {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
    }

    .btn-danger:hover {
        background: linear-gradient(135deg, #c0392b 0%, #a93226 100%);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
    }

    .btn-secondary {
        background: #ecf0f1;
        color: #7f8c8d;
        border: 2px solid #bdc3c7;
    }

    .btn-secondary:hover {
        background: #d5dbdb;
        color: #2c3e50;
        border-color: #95a5a6;
        transform: translateY(-1px);
    }

    .btn-info {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
    }

    .btn-info:hover {
        background: linear-gradient(135deg, #2980b9 0%, #1c6ea4 100%);
        color: white;
        transform: translateY(-1px);
    }

    .checkbox-container {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin: 1.5rem 0;
        padding: 1rem;
        background: white;
        border-radius: 8px;
        border: 2px solid #ecf0f1;
    }

    .checkbox-container input[type="checkbox"] {
        width: 20px;
        height: 20px;
        accent-color: #e74c3c;
    }

    .checkbox-label {
        color: #2c3e50;
        font-weight: 500;
        cursor: pointer;
        user-select: none;
    }

    .delete-button {
        opacity: 0.5;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

    .delete-button.enabled {
        opacity: 1;
        pointer-events: auto;
    }

    .fade-in {
        animation: fadeIn 0.5s ease-in;
    }

    @@keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @@media (max-width: 768px) {
        .action-buttons {
            flex-direction: column;
            gap: 1rem;
        }
        
        .btn {
            width: 100%;
            min-width: auto;
        }
        
        .info-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="container-fluid px-4">
    <!-- Page Header -->
    <div class="page-header fade-in">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <h1 class="page-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    Bilgisayar Sil
                </h1>
                <p class="page-subtitle">Bu işlem geri alınamaz - Dikkatli olun!</p>
            </div>
            <a asp-action="Index" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i>
                Güvenli Çıkış
            </a>
        </div>
    </div>

    <!-- Danger Alert -->
    <div class="danger-alert fade-in">
        <div class="danger-icon">
            <i class="fas fa-skull-crossbones"></i>
        </div>
        <h2 class="danger-title">⚠️ TEHLİKELİ İŞLEM</h2>
        <p class="danger-message">
            Bu bilgisayar kaydını silmek üzeresiniz. Bu işlem <strong>GERİ ALINAMAZ</strong> ve tüm veriler kalıcı olarak silinecektir.
        </p>
    </div>

    <!-- Computer Information -->
    <div class="computer-info-card fade-in">
        <div class="computer-header">
            <div class="computer-icon">
                <i class="fas fa-desktop"></i>
            </div>
            <div class="computer-details">
                <h3>@Model.Name</h3>
                <div class="meta">
                    Varlık Etiketi: <strong>@Model.AssetTag</strong> • 
                    Seri No: <strong>@Model.SerialNumber</strong> • 
                    Kayıt: <strong>@Model.CreatedDate.ToString("dd.MM.yyyy")</strong>
                </div>
            </div>
        </div>

        <div class="info-grid">
            <!-- Temel Bilgiler -->
            <div class="info-section">
                <h4>
                    <i class="fas fa-info-circle"></i>
                    Temel Bilgiler
                </h4>
                
                @if (!string.IsNullOrEmpty(Model.Brand) || !string.IsNullOrEmpty(Model.Model))
                {
                    <div class="info-item">
                        <span class="info-label">Marka/Model:</span>
                        <span class="info-value">@Model.Brand @Model.Model</span>
                    </div>
                }
                
                @if (!string.IsNullOrEmpty(Model.OperatingSystem))
                {
                    <div class="info-item">
                        <span class="info-label">İşletim Sistemi:</span>
                        <span class="info-value">@Model.OperatingSystem</span>
                    </div>
                }
                
                <div class="info-item">
                    <span class="info-label">Durum:</span>
                    <span class="info-value">
                        @if (Model.Status == ComputerStatus.Aktif)
                        {
                            <span class="status-badge active">
                                <i class="fas fa-circle"></i>
                                Aktif
                            </span>
                        }
                        else
                        {
                            <span class="status-badge inactive">
                                <i class="fas fa-circle"></i>
                                @Model.Status
                            </span>
                        }
                    </span>
                </div>
            </div>

            <!-- Firma ve Çalışan -->
            <div class="info-section">
                <h4>
                    <i class="fas fa-users"></i>
                    Firma & Çalışan
                </h4>
                
                <div class="info-item">
                    <span class="info-label">Firma:</span>
                    <span class="info-value">
                        @if (Model.Company != null)
                        {
                            <span>@Model.Company.Name</span>
                        }
                        else
                        {
                            <span class="text-muted">Belirtilmemiş</span>
                        }
                    </span>
                </div>
                
                <div class="info-item">
                    <span class="info-label">Zimmetli Çalışan:</span>
                    <span class="info-value">
                        @if (Model.AssignedEmployee != null)
                        {
                            <div class="employee-info">
                                <div class="employee-avatar">
                                    @(Model.AssignedEmployee.FirstName?.Substring(0, 1).ToUpper())@(Model.AssignedEmployee.LastName?.Substring(0, 1).ToUpper())
                                </div>
                                <span>@Model.AssignedEmployee.FirstName @Model.AssignedEmployee.LastName</span>
                            </div>
                        }
                        else
                        {
                            <span class="text-muted">Atanmamış</span>
                        }
                    </span>
                </div>
                
                @if (Model.PurchaseDate.HasValue)
                {
                    <div class="info-item">
                        <span class="info-label">Satın Alma:</span>
                        <span class="info-value">@Model.PurchaseDate?.ToString("dd.MM.yyyy")</span>
                    </div>
                }
                
                @if (Model.WarrantyEndDate.HasValue)
                {
                    <div class="info-item">
                        <span class="info-label">Garanti Bitiş:</span>
                        <span class="info-value">
                            @Model.WarrantyEndDate?.ToString("dd.MM.yyyy")
                            @if (Model.IsWarrantyExpired)
                            {
                                <small class="text-danger">(Dolmuş)</small>
                            }
                        </span>
                    </div>
                }
            </div>

            <!-- Teknik Özellikler -->
            @if (!string.IsNullOrEmpty(Model.ProcessorName) || Model.RamAmount.HasValue || Model.StorageSize.HasValue)
            {
                <div class="info-section">
                    <h4>
                        <i class="fas fa-microchip"></i>
                        Teknik Özellikler
                    </h4>
                    
                    @if (!string.IsNullOrEmpty(Model.ProcessorName))
                    {
                        <div class="info-item">
                            <span class="info-label">İşlemci:</span>
                            <span class="info-value">@Model.ProcessorName</span>
                        </div>
                    }
                    
                    @if (Model.RamAmount.HasValue)
                    {
                        <div class="info-item">
                            <span class="info-label">RAM:</span>
                            <span class="info-value">@Model.RamAmount GB @Model.RamType</span>
                        </div>
                    }
                    
                    @if (Model.StorageSize.HasValue)
                    {
                        <div class="info-item">
                            <span class="info-label">Depolama:</span>
                            <span class="info-value">@Model.StorageSize GB @Model.StorageType</span>
                        </div>
                    }
                    
                    @if (!string.IsNullOrEmpty(Model.GraphicsCard))
                    {
                        <div class="info-item">
                            <span class="info-label">Ekran Kartı:</span>
                            <span class="info-value">@Model.GraphicsCard</span>
                        </div>
                    }
                </div>
            }

            <!-- Notlar -->
            @if (!string.IsNullOrEmpty(Model.Description))
            {
                <div class="info-section">
                    <h4>
                        <i class="fas fa-sticky-note"></i>
                        Notlar
                    </h4>
                    <div style="white-space: pre-line; color: #2c3e50; font-size: 0.9rem; line-height: 1.5;">
                        @Model.Description
                    </div>
                </div>
            }
        </div>
    </div>

    <!-- Consequences Warning -->
    <div class="consequences-card fade-in">
        <h3 class="consequences-title">
            <i class="fas fa-exclamation-triangle"></i>
            Bu İşlemin Sonuçları
        </h3>
        <ul class="consequences-list">
            <li>
                <i class="fas fa-times-circle"></i>
                Bilgisayar kaydı kalıcı olarak silinecek
            </li>
            <li>
                <i class="fas fa-times-circle"></i>
                Tüm teknik özellik bilgileri kaybolacak
            </li>
            <li>
                <i class="fas fa-times-circle"></i>
                Garanti ve satın alma bilgileri silinecek
            </li>
            <li>
                <i class="fas fa-times-circle"></i>
                Çalışan ataması geri alınamaz şekilde kaybolacak
            </li>
            <li>
                <i class="fas fa-times-circle"></i>
                Bu işlem sonrasında veri kurtarma mümkün olmayacak
            </li>
        </ul>
    </div>

    <!-- Confirmation Form -->
    <form asp-action="Delete" method="post" id="deleteForm">
        <input type="hidden" asp-for="Id" />
        
        <div class="checkbox-container fade-in">
            <input type="checkbox" id="confirmDelete" />
            <label for="confirmDelete" class="checkbox-label">
                ✋ Bu bilgisayar kaydını silmek istediğimi ve bu işlemin <strong>geri alınamaz</strong> olduğunu anlıyorum.
            </label>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons fade-in">
            <div class="d-flex gap-2">
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="fas fa-shield-alt"></i>
                    Vazgeç
                </a>
                <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-info">
                    <i class="fas fa-eye"></i>
                    Detayları Görüntüle
                </a>
                <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-info">
                    <i class="fas fa-edit"></i>
                    Düzenle
                </a>
            </div>
            
            <button type="submit" class="btn btn-danger delete-button" id="deleteButton">
                <i class="fas fa-skull-crossbones"></i>
                Kalıcı Olarak Sil
            </button>
        </div>
    </form>
</div>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.7.3/sweetalert2.min.js"></script>
    <script>
        // Onay checkbox'ı kontrolü
        const confirmCheckbox = document.getElementById('confirmDelete');
        const deleteButton = document.getElementById('deleteButton');
        
        confirmCheckbox.addEventListener('change', function() {
            if (this.checked) {
                deleteButton.classList.add('enabled');
            } else {
                deleteButton.classList.remove('enabled');
            }
        });

        // Form gönderim kontrolü
        document.getElementById('deleteForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!confirmCheckbox.checked) {
                Swal.fire({
                    icon: 'warning',
                    title: 'Onay Gerekli',
                    text: 'Silme işlemini onaylamak için kutucuğu işaretleyin.',
                    confirmButtonColor: '#e74c3c'
                });
                return;
            }

            // Son onay
            Swal.fire({
                title: 'SON UYARI!',
                html: `
                    <div style="text-align: center; padding: 1rem;">
                        <div style="font-size: 4rem; color: #e74c3c; margin-bottom: 1rem;">💀</div>
                        <p style="font-size: 1.2rem; color: #e74c3c; font-weight: bold;">
                            <strong>@Model.Name</strong> bilgisayarını silmek üzeresiniz!
                        </p>
                        <p style="color: #7f8c8d; margin-top: 1rem;">
                            Bu işlem <strong>GERİ ALINAMAZ</strong>. Emin misiniz?
                        </p>
                    </div>
                `,
                icon: 'error',
                showCancelButton: true,
                confirmButtonColor: '#e74c3c',
                cancelButtonColor: '#95a5a6',
                confirmButtonText: '💀 EVET, SİL!',
                cancelButtonText: '🛡️ HAYIR, VAZGEÇ',
                reverseButtons: true,
                focusCancel: true,
                allowOutsideClick: false,
                allowEscapeKey: false
            }).then((result) => {
                if (result.isConfirmed) {
                    // Silme işlemi animasyonu
                    Swal.fire({
                        title: 'Siliniyor...',
                        html: 'Bilgisayar kaydı siliniyor, lütfen bekleyin.',
                        allowOutsideClick: false,
                        allowEscapeKey: false,
                        showConfirmButton: false,
                        didOpen: () => {
                            Swal.showLoading();
                        }
                    });
                    
                    // Form'u gerçekten gönder
                    setTimeout(() => {
                        this.submit();
                    }, 2000);
                }
            });
        });

        // Sayfa koruması
        window.addEventListener('beforeunload', function(e) {
            e.preventDefault();
            e.returnValue = 'Bu sayfadan ayrılmak istediğinizden emin misiniz?';
        });

        // Tehlikeli alan vurgusu
        setInterval(() => {
            const dangerElements = document.querySelectorAll('.danger-alert, .consequences-card');
            dangerElements.forEach(el => {
                el.style.animation = 'none';
                setTimeout(() => el.style.animation = 'pulse 2s ease-in-out', 10);
            });
        }, 10000);
    </script>
}